var distritoAct,list_body=$("#list_body"),dService=new distritoService,idCampo=$("#crm_idCampo").val();function listDistrito(t){for(var i="",e=0;e<t.length;e++){var o=t[e],a=getLetter(o.disNombre),d=new Date(o.disFechaCreacion),s=d.getFullYear(),r=1+d.getMonth(),l=d.getDate();i+="<tr>",i+='<td style="width:38px;"><button class="btn-floating waves-effect waves-light '+getColor()+'">'+a+"</button></td>",i+='<td class="condensed"><h6><strong>'+o.disNombre.toUpperCase()+"</strong></h6></td>",i+='<td class="tR"><small>Registrado el</small> '+l+"/"+r+"/"+s+"</td>",i+='<td style="float:right">',i+='<a class="grey-text tR" onclick="updateDistrito('+o.idDistrito+')"><i class="mdi-editor-mode-edit actCRUD"></i></a>',i+='<a class="grey-text tR" onclick="deleteDistrito('+o.idDistrito+')"><i class="mdi-action-delete actCRUD"></i></a>',i+='<a class="grey-text tR"><i class="mdi-social-group actCRUD"></i></a>',i+='<a class="grey-text tS"><i class="mdi-action-info-outline actCRUD"></i></a>',i+='<a class="grey-text dropdown-button tS" data-activates="dropdown'+e+'"><i class="mdi-navigation-more-vert actCRUD"></i></a>',i+='<ul id="dropdown'+e+'" class="dropdown-content">',i+='<li><a onclick="updateDistrito('+o.idDistrito+')" class="-text">Editar</a></li>',i+='<li><a onclick="deleteDistrito('+o.idDistrito+')" class="-text">Eliminar</a></li>',i+="</ul>",i+="</td>",i+="</tr>"}$(list_body).empty(),$(list_body).append(i),$(".dropdown-button").dropdown()}function updateDistrito(t){var i={idDistrito:t};dService.getDistrito(i,function(t){var i=createModal("update",(distritoAct=t).disNombre,"active");$(".modal-content").empty(),$(".modal-content").append(i),$("#modal1").openModal()})}function deleteDistrito(i){confirmMessage({title:"Eliminar Distrito Misionero",content:"Â¿Seguro que desea eliminar este distrito?"},function(){var t={idDistrito:i};dService.deleteDistrito(t,reload)})}function save(){var t,i=$("#ndis").val(),e=$("#tipModal").val();""!==i?("create"===e&&(t={disNombre:i,campo:{idCampo:idCampo}},dService.addDistrito(t,reload)),"update"===e&&(t={disNombre:i,idDistrito:distritoAct.idDistrito,disEstado:distritoAct.disEstado,disFechaCreacion:distritoAct.disFechaCreacion,campo:{idCampo:distritoAct.campo.idCampo}},dService.updateDistrito(t,reload))):alert("Campos Incompletos...")}function reload(t){0!==t&&dService.listDistrito({idCampo:idCampo},listDistrito)}function createModal(t,i,e){var o="";return o+='<h5 class="thin">Distrito</h5>',o+='<div class="row">',o+='<form class="col s12">',o+='<div class="row">',o+='<div class="input-field col s12 l6 m6">',o+='<i class="mdi-social-group prefix"></i>',o+='<input id="ndis" type="text" class="validate" value="'+i+'">',o+='<label for="ndis" class="'+e+'">Nombre</label>',o+="</div>",o+="</div>",o+='<input type="hidden" value='+t+' id="tipModal">',o+="</form>",o+="</div>"}function createDistrito(){var t=createModal("create","","");$(".modal-content").empty(),$(".modal-content").append(t),$("#modal1").openModal()}$(document).ready(function(){$(".titleTab").empty(),$(".titleTab").append("Listado de distritos misioneros que pertencen al campo <strong>"+$("#crm_cmpNombre").val().toUpperCase()+"</strong>");var t={idCampo:idCampo};dService.listDistrito(t,listDistrito)});
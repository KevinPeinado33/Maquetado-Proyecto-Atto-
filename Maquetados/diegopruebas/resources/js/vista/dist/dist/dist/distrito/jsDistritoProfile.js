var distritoProfile=function(){var l=$("#tab1"),t=$("#tab3"),e=$("#conModal"),o={},n=function(r){iglesiaService.list({idDistrito:o.idDistrito},function(e){var i=[];$("#igl_count").html(e.length);for(var t=0;t<e.length;t++){var a=e[t],o=dateConverter.format.longStringToDate(a.iglFechaCreacion);i.push({events:[{type:"click",action:"redirect('/iglesia/profile/"+a.idIglesia+"')"}],cols:[{type:"card-table-image",src:"",default:appDefaults.defaults.logoGrupo},{type:"card-table-content",label:"",value:a.iglNombre},{type:"card-table-content",label:"Dirección",value:void 0===a.iglDireccion?"No registrado":a.iglDireccion},{type:"card-table-content",label:"Fecha de Registro",value:o}]});var n=strings.random(8);components.render(l,components.cardTable.code(i,n)),components.cardTable.event(i,n),r()}})};return{init:function(){o.idDistrito=parseInt($("#info_distrito_idDistrito").val()),o.nombre=$("#info_distrito_nombre").val(),o.idCampo=parseInt($("#info_distrito_idCampo").val()),n(function(){adminLeaders.listLeaders(4,t)})},remove:function(){confirmMessage({title:"Eliminar",content:"¿Seguro que desea eliminar este distrito?"},function(){distritoService.remove({idDistrito:o.idDistrito},function(e){redirect("/menu")})})},update:function(){var i,t=$("#disNombre").val(),e=$("#disFechaCreacion").val().split(" ");i=validate.incomplete([e[1]])?dateConverter.format.datePickerToString($("#disFechaCreacion").val()):e[0];var a={idDistrito:o.idDistrito,campo:{idCampo:o.idCampo},disNombre:t,disFechaCreacion:i,disFechaRegistro:new Date($("#info_distrito_disFechaRegistro").val()),disEstado:"1"};distritoService.update(a,function(e){o.nombre=t,$("#tit_distrito").empty().append(t+'<i class="mdi-navigation-more-vert right"></i>'),$("#d_fec").empty().append("Fecha de Creación : "+i),$("#disFechaCreacion").val(i)})},addIglesia:function(){var e=$("#n_iglNombre").val(),i=$("#n_iglFechaCreacion").val(),t=$("#n_iglDireccion").val();if(validate.incomplete([e,i,t])){var a={distrito:{idDistrito:o.idDistrito},iglNombre:e,iglFechaCreacion:dateConverter.format.dateSlach(i),iglDireccion:t};iglesiaService.add(a,function(e){n(function(){})})}else infoMessage({title:message.incomplete.title,content:message.incomplete.content})},regIglesia:function(){components.render(e,'<div class="modal-content"><h4>Registro de Iglesia</h4><div class="row"><div class="col l6 m12 s12 input-field"><input type="text" id="n_iglNombre" name="n_iglNombre" value=""/><label for="n_iglNombre">Nombre de la Iglesia</label></div><div class="col l6 m12 s12 input-field"><input type="text" id="n_iglFechaCreacion" name="n_iglFechaCreacion" value="" class="datepicker"/><label for="n_iglFechaCreacion">Fecha de Creacion</label></div><div class="col l12 m12 s12 input-field"><input type="text" id="n_iglDireccion" name="n_iglDireccion" value=""/><label for="n_iglDireccion">Dirección de la Iglesia</label></div></div></div>'),$("#saveModal").empty().append("Registrar"),$("#saveModal").attr("onclick","distritoProfile.addIglesia()"),$(".datepicker").pickadate()},regLeader:function(){components.render(e,components.modalSetRol.code("persona-enabled","test",[{id:15,nombre:"Pastor de Distrito"},{id:6,nombre:"MIPES de Distrito"}])),select2.init(),$("#saveModal").empty().append("Asignar"),$("#saveModal").attr("onclick","distritoProfile.addLeader()")},addLeader:function(){var e=$("#persona").val(),i=$("#rolS").val();adminLeaders.addLeader(e,i,function(e){adminLeaders.listLeaders(3,t)})}}}();